/*
 imagesLoaded PACKAGED v4.1.1
 JavaScript is all like "You images are done yet or what?"
 MIT License
 imagesLoaded v4.1.1
 JavaScript is all like "You images are done yet or what?"
 MIT License
*/
(function(d,f){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",f):"object"==typeof module&&module.exports?module.exports=f():d.EvEmitter=f()})("undefined"!=typeof window?window:this,function(){function d(){}var f=d.prototype;f.on=function(e,g){if(e&&g){var c=this._events=this._events||{};e=c[e]=c[e]||[];-1==e.indexOf(g)&&e.push(g);return this}};f.once=function(e,g){if(e&&g){this.on(e,g);var c=this._onceEvents=this._onceEvents||{};(c[e]=c[e]||{})[g]=!0;return this}};f.off=function(e,
g){if((e=this._events&&this._events[e])&&e.length)return g=e.indexOf(g),-1!=g&&e.splice(g,1),this};f.emitEvent=function(e,g){var c=this._events&&this._events[e];if(c&&c.length){var f=0,d=c[f];g=g||[];for(var k=this._onceEvents&&this._onceEvents[e];d;){var m=k&&k[d];m&&(this.off(e,d),delete k[d]);d.apply(this,g);f+=m?0:1;d=c[f]}return this}};return d});
(function(d,f){"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(e){return f(d,e)}):"object"==typeof module&&module.exports?module.exports=f(d,require("ev-emitter")):d.imagesLoaded=f(d,d.EvEmitter)})(window,function(d,f){function e(a,b){for(var c in b)a[c]=b[c];return a}function g(a){var b=[];if(Array.isArray(a))b=a;else if("number"==typeof a.length)for(var c=0;c<a.length;c++)b.push(a[c]);else b.push(a);return b}function c(a,b,d){if(!(this instanceof c))return new c(a,
b,d);"string"==typeof a&&(a=document.querySelectorAll(a));this.elements=g(a);this.options=e({},this.options);"function"==typeof b?d=b:e(this.options,b);if(d)this.on("always",d);this.getImages();k&&(this.jqDeferred=new k.Deferred);setTimeout(function(){this.check()}.bind(this))}function h(a){this.img=a}function l(a,b){this.url=a;this.element=b;this.img=new Image}var k=d.jQuery,m=d.console;c.prototype=Object.create(f.prototype);c.prototype.options={};c.prototype.getImages=function(){this.images=[];
this.elements.forEach(this.addElementImages,this)};c.prototype.addElementImages=function(a){"IMG"==a.nodeName&&this.addImage(a);!0===this.options.background&&this.addElementBackgroundImages(a);var b=a.nodeType;if(b&&n[b]){var c=a.querySelectorAll("img");for(b=0;b<c.length;b++)this.addImage(c[b]);if("string"==typeof this.options.background)for(a=a.querySelectorAll(this.options.background),b=0;b<a.length;b++)this.addElementBackgroundImages(a[b])}};var n={1:!0,9:!0,11:!0};c.prototype.addElementBackgroundImages=
function(a){var b=getComputedStyle(a);if(b)for(var c=/url\((['"])?(.*?)\1\)/gi,d=c.exec(b.backgroundImage);null!==d;)(d=d&&d[2])&&this.addBackground(d,a),d=c.exec(b.backgroundImage)};c.prototype.addImage=function(a){a=new h(a);this.images.push(a)};c.prototype.addBackground=function(a,b){a=new l(a,b);this.images.push(a)};c.prototype.check=function(){function a(a,c,d){setTimeout(function(){b.progress(a,c,d)})}var b=this;this.progressedCount=0;this.hasAnyBroken=!1;this.images.length?this.images.forEach(function(b){b.once("progress",
a);b.check()}):this.complete()};c.prototype.progress=function(a,b,c){this.progressedCount++;this.hasAnyBroken=this.hasAnyBroken||!a.isLoaded;this.emitEvent("progress",[this,a,b]);this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,a);this.progressedCount==this.images.length&&this.complete();this.options.debug&&m&&m.log("progress: "+c,a,b)};c.prototype.complete=function(){var a=this.hasAnyBroken?"fail":"done";this.isComplete=!0;this.emitEvent(a,[this]);this.emitEvent("always",[this]);
if(this.jqDeferred)this.jqDeferred[this.hasAnyBroken?"reject":"resolve"](this)};h.prototype=Object.create(f.prototype);h.prototype.check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src)};h.prototype.getIsImageComplete=function(){return this.img.complete&&
void 0!==this.img.naturalWidth};h.prototype.confirm=function(a,b){this.isLoaded=a;this.emitEvent("progress",[this,this.img,b])};h.prototype.handleEvent=function(a){var b="on"+a.type;if(this[b])this[b](a)};h.prototype.onload=function(){this.confirm(!0,"onload");this.unbindEvents()};h.prototype.onerror=function(){this.confirm(!1,"onerror");this.unbindEvents()};h.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this);this.proxyImage.removeEventListener("error",this);this.img.removeEventListener("load",
this);this.img.removeEventListener("error",this)};l.prototype=Object.create(h.prototype);l.prototype.check=function(){this.img.addEventListener("load",this);this.img.addEventListener("error",this);this.img.src=this.url;this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())};l.prototype.unbindEvents=function(){this.img.removeEventListener("load",this);this.img.removeEventListener("error",this)};l.prototype.confirm=function(a,b){this.isLoaded=a;this.emitEvent("progress",
[this,this.element,b])};c.makeJQueryPlugin=function(a){if(a=a||d.jQuery)k=a,k.fn.imagesLoaded=function(a,d){return(new c(this,a,d)).jqDeferred.promise(k(this))}};c.makeJQueryPlugin();return c});