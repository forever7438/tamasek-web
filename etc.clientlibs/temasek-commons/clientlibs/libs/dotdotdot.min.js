!function(d,y){function z(a,b,f,c,k){var g=!1;return a.contents().detach().each(function(){var e=d(this);if("undefined"==typeof this)return!0;if(e.is("script, .dotdotdot-keep"))a.append(e);else{if(g)return!0;a.append(e);!k||e.is(c.after)||e.find(c.after).length||a[a.is("a, table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style")?"after":"append"](k);v(f,c)&&(g=3==this.nodeType?D(e,b,f,c,k):z(e,b,f,c,k));g||k&&
k.detach()}}),b.addClass("is-truncated"),g}function D(a,b,f,c,k){var g=a[0];if(!g)return!1;var e=A(g),m=-1!==e.indexOf(" ")?" ":"\u3000";m="letter"==c.wrap?"":m;var l=e.split(m),h=-1,q=-1,r=0,n=l.length-1;if(c.fallbackToLetter&&0===r&&0===n&&(m="",l=e.split(m),n=l.length-1),c.maxLength)e=x(e.trim().substr(0,c.maxLength),c),t(g,e);else{for(;n>=r&&(0!==r||0!==n);){var p=Math.floor((r+n)/2);if(p==q)break;q=p;t(g,l.slice(0,q+1).join(m)+c.ellipsis);f.children().each(function(){d(this).toggle().toggle()});
v(f,c)?(n=q,c.fallbackToLetter&&0===r&&0===n&&(m="",l=l[0].split(m),h=-1,q=-1,r=0,n=l.length-1)):(h=q,r=q)}if(-1==h||1===l.length&&0===l[0].length){if(f=a.parent(),a.detach(),a=k&&k.closest(f).length?k.length:0,f.contents().length>a?g=w(f.contents().eq(-1-a),b):(g=w(f,b,!0),a||f.detach()),g&&(e=x(A(g),c),t(g,e),a&&k))b=k.parent(),d(g).parent().append(k),d.trim(b.html())||b.remove()}else e=x(l.slice(0,h+1).join(m),c),t(g,e)}return!0}function v(a,b){return a.innerHeight()>b.maxHeight||b.maxLength&&
a.text().trim().length>b.maxLength}function x(a,b){for(;-1<d.inArray(a.slice(-1),b.lastCharacter.remove);)a=a.slice(0,-1);return 0>d.inArray(a.slice(-1),b.lastCharacter.noEllipsis)&&(a+=b.ellipsis),a}function B(a){return{width:a.innerWidth(),height:a.innerHeight()}}function t(a,b){a.innerText?a.innerText=b:a.nodeValue?a.nodeValue=b:a.textContent&&(a.textContent=b)}function A(a){return a.innerText?a.innerText:a.nodeValue?a.nodeValue:a.textContent?a.textContent:""}function C(a){do a=a.previousSibling;
while(a&&1!==a.nodeType&&3!==a.nodeType);return a}function w(a,b,f){var c=a&&a[0];if(c){if(!f){if(3===c.nodeType)return c;if(d.trim(a.text()))return w(a.contents().last(),b)}for(f=C(c);!f;){if(a=a.parent(),a.is(b)||!a.length)return!1;f=C(a[0])}if(f)return w(d(f),b)}return!1}function E(a,b){return a?"string"==typeof a?(a=d(a,b),a.length?a:!1):a.jquery?a:!1:!1}if(!d.fn.dotdotdot){d.fn.dotdotdot=function(a){if(0===this.length)return d.fn.dotdotdot.debug('No element found for "'+this.selector+'".'),this;
if(1<this.length)return this.each(function(){d(this).dotdotdot(a)});var b=this,f=b.contents();b.data("dotdotdot")&&b.trigger("destroy.dot");b.data("dotdotdot-style",b.attr("style")||"");b.css("word-wrap","break-word");"nowrap"===b.css("white-space")&&b.css("white-space","normal");b.bind_events=function(){return b.bind("update.dot",function(a,h){switch(b.removeClass("is-truncated"),a.preventDefault(),a.stopPropagation(),typeof c.height){case "number":c.maxHeight=c.height;break;case "function":c.maxHeight=
c.height.call(b[0]);break;default:a=c;for(var l=b.innerHeight(),e=["paddingTop","paddingBottom"],g=0,p=e.length;p>g;g++){var u=parseInt(b.css(e[g]),10);isNaN(u)&&(u=0);l-=u}a.maxHeight=l}c.maxHeight+=c.tolerance;"undefined"!=typeof h&&(("string"==typeof h||"nodeType"in h&&1===h.nodeType)&&(h=d("\x3cdiv /\x3e").append(h).contents()),h instanceof d&&(f=h));m=b.wrapInner('\x3cdiv class\x3d"dotdotdot" /\x3e').children();m.contents().detach().end().append(f.clone(!0)).find("br").replaceWith("  \x3cbr /\x3e  ").end().css({height:"auto",
width:"auto",border:"none",padding:0,margin:0});h=l=!1;k.afterElement&&(l=k.afterElement.clone(!0),l.show(),k.afterElement.detach());if(v(m,c))if("children"==c.wrap){h=m;a=c;e=h.children();g=!1;h.empty();p=0;for(u=e.length;u>p;p++){var t=e.eq(p);if(h.append(t),l&&h.append(l),v(h,a)){t.remove();g=!0;break}l&&l.detach()}h=g}else h=z(m,b,m,c,l);return m.replaceWith(m.contents()),m=null,d.isFunction(c.callback)&&c.callback.call(b[0],h,f),k.isTruncated=h,h}).bind("isTruncated.dot",function(a,c){return a.preventDefault(),
a.stopPropagation(),"function"==typeof c&&c.call(b[0],k.isTruncated),k.isTruncated}).bind("originalContent.dot",function(a,c){return a.preventDefault(),a.stopPropagation(),"function"==typeof c&&c.call(b[0],f),f}).bind("destroy.dot",function(a){a.preventDefault();a.stopPropagation();b.unwatch().unbind_events().contents().detach().end().append(f).attr("style",b.data("dotdotdot-style")||"").removeClass("is-truncated").data("dotdotdot",!1)}),b};b.unbind_events=function(){return b.unbind(".dot"),b};b.watch=
function(){if(b.unwatch(),"window"==c.watch){var a=d(window),h=a.width(),f=a.height();a.bind("resize.dot"+k.dotId,function(){h==a.width()&&f==a.height()&&c.windowResizeFix||(h=a.width(),f=a.height(),e&&clearInterval(e),e=setTimeout(function(){b.trigger("update.dot")},100))})}else g=B(b),e=setInterval(function(){if(b.is(":visible")){var a=B(b);(g.width!=a.width||g.height!=a.height)&&(b.trigger("update.dot"),g=a)}},500);return b};b.unwatch=function(){return d(window).unbind("resize.dot"+k.dotId),e&&
clearInterval(e),b};var c=d.extend(!0,{},d.fn.dotdotdot.defaults,a),k={},g={},e=null,m=null;return c.lastCharacter.remove instanceof Array||(c.lastCharacter.remove=d.fn.dotdotdot.defaultArrays.lastCharacter.remove),c.lastCharacter.noEllipsis instanceof Array||(c.lastCharacter.noEllipsis=d.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis),k.afterElement=E(c.after,b),k.isTruncated=!1,k.dotId=F++,b.data("dotdotdot",!0).bind_events().trigger("update.dot"),c.watch&&b.watch(),b};d.fn.dotdotdot.defaults=
{ellipsis:"... ",wrap:"word",fallbackToLetter:!0,lastCharacter:{},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0,maxLength:null};d.fn.dotdotdot.defaultArrays={lastCharacter:{remove:" \u3000,;.!?".split(""),noEllipsis:[]}};d.fn.dotdotdot.debug=function(a){};var F=1,G=d.fn.html;d.fn.html=function(a){return a!=y&&!d.isFunction(a)&&this.data("dotdotdot")?this.trigger("update",[a]):G.apply(this,arguments)};var H=d.fn.text;d.fn.text=function(a){return a!=y&&!d.isFunction(a)&&
this.data("dotdotdot")?(a=d("\x3cdiv /\x3e").text(a).html(),this.trigger("update",[a])):H.apply(this,arguments)}}}(jQuery);