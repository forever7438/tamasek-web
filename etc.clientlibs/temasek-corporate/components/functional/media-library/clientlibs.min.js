jQuery(function(b){function d(){b(".media-overly .image-wrapper").empty();b(".media-overly, .media-overly-bg").hide();b("body").removeAttr("style")}function q(a){var b=a.openNewTab?h.map(a.links,function(a){return["a",{href:a.link,target:"_blank"},a.text]}):h.map(a.links,function(a){return["a",{href:a.link},a.text]});return["li",{"class":"column"},["a",{"class":"zoom-img-link","data-image-data":JSON.stringify(a),href:"#"},["div",{"class":"img-wrap"},["img",{src:a.thumbnailImagePath||"",alt:""}],["div",
{"class":"hover-content"},["span",{"class":"icon eye-icon"}]]]],["div",{"class":"details sas"},["p",{"class":"publish-date"},["small",a.publishDate]],["h3",a.title]],["div",{"class":"external"},b]]}function t(a){function r(a){var b=c.find(".page-link");b.empty();for(var e=[""],f=1;f<=a;){var g={id:"page"+f,"data-type":"page","data-page-number":f,href:"#"};1===f&&(g["class"]="active");e.push(["a",g,f]);f+=1}1<a&&h.append(b[0],e);c.attr("data-total-pages",a);c.find(".prev").hide();1>=a?c.find(".next").hide():
c.find(".next").show()}function d(a,b){jQuery.ajax("/bin/public/temasek-corporate/media-library-items.json",{method:"GET",dataType:"json",data:{resourcePath:g.resourcePath,currentPageNumber:a,itemsPerPage:g.itemCount}}).done(function(e){var f=["ul",{"class":"grid-row"}],d=c.find(".media-result-section");d.empty();e&&e.items&&0<e.items.length?(c.attr("data-current-page",a),b&&r(e.totalPageCount),m.forEach(e.items,function(a){"video"===a.type?f.push(["li",{"class":"column"},["a",{"class":"video-play-link",
"data-video-path":a.videoPath,href:"#"},["div",{"class":"img-wrap"},["span",{"class":"play-icon"}],["img",{src:a.thumbnailImagePath||"",alt:""}],["div",{"class":"hover-content"}]]]]):f.push(q(a))}),h.append(d[0],f)):d.append(g.errorMessage)}).fail(function(a){console.log("getMediaGalleryContent fail:",a);c.find(".paging").remove()})}var c=b(a),g={resourcePath:c.data("resource"),lang:b("body").data("languageName"),itemCount:c.data("itemsPerPage"),errorMessage:c.data("noItemsToDisplay")},l,k=1;c.on("click",
".paging a",function(a){a.preventDefault();a=b(a.currentTarget).data("pageNumber");k=c.attr("data-current-page");k=n.parseInt(k,10);"next"===a?a=k+1:"prev"===a&&(a=k-1);var e=a;c.find(".paging a").removeClass("active");c.find(".paging a#page"+e).addClass("active");d(e,!1);l=c.attr("data-total-pages");l=n.parseInt(l,10);a===l?c.find(".next").hide():c.find(".next").show();1===a?c.find(".prev").hide():c.find(".prev").show()});c.on("click",".video-play-link",function(a){a.preventDefault();a.stopPropagation();
a=b(a.currentTarget).data("videoPath");b(".media-overly, .media-overly-bg").show();b("body").css("overflow","hidden");var c=document.querySelector(".media-overly .image-wrapper");c&&h.append(c,["",["button",{"class":"btn-close"}],["div",{"class":"video-wrapper"},["video",{width:"800",height:"450",controls:""},["source",{src:a,type:"video/mp4"}],"Your browser does not support HTML5 video."]]])});h.append(a,["div",{"class":"paging"},["a",{"class":"prev","data-page-number":"prev",href:"#"},"Previous"],
["div",{"class":"page-link"}],["a",{"class":"next","data-page-number":"next",href:"#"},"Next"]]);d(k,!0)}var n=blacksunplc.numbers,m=blacksunplc.arrays,h=blacksunplc.jsonml,p=document.querySelectorAll(".media-library-wrapper"),g=b(".author-mode").length;p&&!g&&(g=b(".media-overly"),b("body").on("click",".zoom-img-link",function(a){a.preventDefault();a.stopPropagation();a=b(a.currentTarget).data("imageData");a.description||(a.description="");b(".media-overly, .media-overly-bg").show();b("body").css("overflow",
"hidden");b(".media-overly").scrollTop(0);var d=document.querySelector(".media-overly .image-wrapper");d&&h.append(d,["",["button",{"class":"btn-close"}],["img",{src:a.zoomImagePath||"",alt:""}],["div",{"class":"details"},["h3",a.title],["a",{"class":"icon icon-download",href:a.downloadImagePath,target:"_blank"}],["p",a.description]]])}),g.on("click",".btn-close",d),b(document).on("click",d),b(".overly-content-hld").on("click",".image-wrapper img, .image-wrapper .details, .image-wrapper video",function(a){a.stopPropagation()}),
b(document).on("keyup",function(a){27===a.keyCode&&d()}),m.forEach(p,function(a){t(a)}))});