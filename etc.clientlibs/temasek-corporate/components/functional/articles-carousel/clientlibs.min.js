jQuery(function(g){function l(c,b,a){b.resource&&jQuery.ajax("/bin/public/temasek-corporate/latest-articles-list?resource\x3d"+b.resource+a,{method:"GET"}).done(function(a){if("undefined"!==typeof a&&(a=a.items)){var d=c.querySelector(".articles-carousel-body");d&&r.remove(d);d=c.querySelector(".alert");a.length?(d.classList.add("hidden"),t(a,c,b)):d.classList.remove("hidden")}}).fail(function(a){console.log(a)})}function u(c,b){var a=c.querySelector(".custom-select select");a&&k.add(a,"change",function(a){var d=
"";a.target.value&&(d="\x26filter\x3d"+a.target.value);g(c).find(".articles-carousel-body").slick("unslick");a=g(c).find(".articles-carousel-arrows button");a.addClass("disabled");a.prop("disabled",!0);l(c,b,d)})}function v(){var c=document.querySelectorAll(".articles-carousel-wrapper");e.forEach(c,function(b){var a={resource:b.getAttribute("data-resource"),dateDisabled:b.getAttribute("data-date-disabled"),hideDescription:b.getAttribute("data-hide-description")};u(b,a);l(b,a,"")})}function m(c){c=
c.querySelectorAll(".articles-carousel-card h3");e.forEach(c,function(a){a.style.height=""});var b=e.reduce(c,function(a,b){return Math.max(a,b.clientHeight)},0)+"px";e.forEach(c,function(a){a.style.height=b})}function n(c){c=c.querySelectorAll(".articles-carousel-card .articles-carousel-card-body p");e.forEach(c,function(a){a.style.height=""});var b=e.reduce(c,function(a,b){return Math.max(a,b.clientHeight)},0)+"px";e.forEach(c,function(a){a.style.height=b})}function p(){var c=document.querySelectorAll(".articles-carousel-wrapper");
768>document.body.clientWidth?e.forEach(c,function(b){var a=b.querySelector(".articles-carousel-footer");a&&b.appendChild(a)}):e.forEach(c,function(b){var a=b.querySelector(".articles-carousel-intro");b=b.querySelector(".articles-carousel-footer");a&&b&&a.appendChild(b)})}function w(c,b){return q.map(c,function(a){var c=["div",{"class":"articles-carousel-card card-category-"+(a.category||"").toLowerCase()},["div",{"class":"articles-carousel-card-thumbnail"},["a",{href:a.link},["div",{"class":"articles-carousel-card-img",
style:"background-image:url("+a.image+")"}]]]];var d=110<a.title.length?a.title.substring(0,110)+"...":a.title;d=["div",{"class":"articles-carousel-card-body"},["h3",["a",{href:a.link},d]]];"true"!==b.hideDescription&&(160<a.description.length?d.push(["p",a.description.substring(0,160)+"..."]):d.push(["p",a.description]));c.push(d);"true"!==b.dateDisabled&&c.push(["div",{"class":"articles-carousel-card-footer"},["p",a.category+(a.date?" - "+a.date:"")]]);return c},"div",{"class":"articles-carousel-body"})}
function t(c,b,a){var e=b.querySelector(".articles-carousel-content");e&&q.append(e,w(c,a));var d=b.querySelector(".articles-carousel-body");if(d){var h=b.querySelector(".articles-carousel-arrow-left"),f=b.querySelector(".articles-carousel-arrow-right");c=g(d);d.classList.contains("slick-initialized")&&c.slick("unslick");c.on("init",function(){var a=b.querySelectorAll(".slick-slide").length;setTimeout(function(){g(d).addClass("was-visible");m(b);n(b)},0);1<b.querySelectorAll(".slick-slide").length&&
(f.classList.remove("disabled"),f.removeAttribute("disabled"));h&&k.add(h,"click",function(){f.classList.remove("disabled");f.removeAttribute("disabled");g(d).slick("slickPrev");b.querySelectorAll(".slick-slide")[0].classList.contains("slick-active")&&(h.classList.add("disabled"),h.setAttribute("disabled",!0))});f&&k.add(f,"click",function(){h.classList.remove("disabled");h.removeAttribute("disabled");g(d).slick("slickNext");b.querySelectorAll(".slick-slide")[a-1].classList.contains("slick-active")&&
(f.classList.add("disabled"),f.setAttribute("disabled",!0))})});a=g("body").hasClass("zh")?2:c.parentsUntil(".articles-carousel.parbase").parent().hasClass("stories-carousel")?3:2;c.slick({slidesToShow:a,slidesToScroll:1,arrows:!1,infinite:!1,responsive:[{breakpoint:1300,settings:{slidesToShow:2}},{breakpoint:992,settings:{slidesToShow:1}}]});c.on("setPosition",function(){m(b);n(b)})}}var e=blacksunplc.arrays,r=blacksunplc.nodes,k=blacksunplc.events,q=blacksunplc.jsonml,x=blacksunplc.functions;k.ready(function(){v();
p()});k.add(window,"resize",x.debounce(p,250))});