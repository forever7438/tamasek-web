(function(k){function t(){(function(){g.forEach(k(".latest-news-item"),function(b){var h=k(b);if(!h.find(".share").length){var g=h.find("a").prop("href"),l=h.find(":header").text(),r=h.find(".latest-news-item-description").text();h=h.data("imgsrc");u.append(b,["div",{"class":"share share-left sharelink"},["div",{"class":"share-inner"},["a",{"class":"tool-share"}],["div",{"class":"share-links-menu"},["div",{"class":"addthis_inline_share_toolbox","data-title":l,"data-url":g,"data-media":h||null,"data-description":r||
null}]]]])}})})();(function(){socialShare.initialize();k(document).on("ajaxComplete",function(){socialShare.events()})})();k("article").find("time").timeago();l=0;window.addthis&&addthis.layers&&addthis.layers.refresh&&addthis.layers.refresh()}var g=blacksunplc.arrays,u=blacksunplc.jsonml,x=blacksunplc.urls,l=0;jQuery(function(b){function h(a,c){var d=parseInt(a.data("start"),10);a.removeClass("total-"+d);a.data("start",c);a.addClass("total-"+c)}function k(a,c,d,e,f){var b=["h3"];f&&b.push(["span",
{"class":"article-category"},a.category]);b.push(a.title);f=["a",{href:a.link}];e&&f.push(e);f.push(b);a.description&&!a.isFeaturedArticle&&f.push(["div",{"class":"story-listing-description"},a.description]);c=["story-item category-"+a.categoryId,"type-"+a.type,"size-"+c];a.isFeaturedArticle&&c.push("featured-article");a={"class":c.join(" ")};d&&(a.style="background-image: url("+d+")");return["article",a,["img",{src:d}],f]}function t(a,c,d,b,f,p,q,h){var e=[""];g.forEach(a,function(a,g){var m=c?!0:
1<(3<=d+g?(g+1)%6:g%6);var v=a.smallImageSrc&&m?a.smallImageSrc:a.largeImageSrc?a.largeImageSrc:"";m=m?"small":"large";p&&3===d+g?e.push(["",["article",{"class":"story-item subscribe-article-button",style:"background-color: "+q},["span",h]],k(a,m,v,b,f)]):e.push(k(a,m,v,b,f))});return e}function r(a,c){var d=b(".story-listing-filter-wrapper"),e=b(".story-listing-filter-content"),f=a.articles,p="enabled"===d.data("showcategory"),q=b(".mail-subscription-wrapper"),k=0<q.length,l=q.data("primarycolor");
q=q.find("button.mc_subscribe_now").text();var n=640>=b(window).width(),r=b(document.body),m=null;if(r.hasClass("fake-news-overview-page")||r.hasClass("fake-news-archived-page"))m=["div",{"class":"fake-news-article-content-wrapper"}];u.append(e[0],t(f,n,c,m,p,k,l,q));g.forEach(e.find("article"),function(a){a=b(a);a.find("img").length||a.addClass("visible")});e.find("img").imagesLoaded().progress(function(a,c){b(c.img).parents("article").addClass("visible");a.elements.length===a.progressedCount&&e.parent().find(".load-more").addClass("visible")});
h(d,c+f.length);!1===a.hasMore&&d.data("halt",!0)}function n(a){if(!0===a.data("halt"))a.find(".load-more").removeClass("visible");else{a.addClass("loadingData");var c=a.data("resource"),d=parseInt(a.data("start"),10),e=g.map(a.find("input.filter:checked"),function(a){return b(a).val()}),f="",p=a.find("input.article-search-field");p&&p.val()&&(f=p.val());jQuery.ajax("/bin/public/temasek-corporate/loadstories.json",{data:{resource:c,start:d,filter:e,searchTerm:f},dataType:"json"}).done(function(c){c&&
(r(c,d),!1===c.hasMore&&(a.find(".load-more").removeClass("visible"),a.find(".load-more").hide()));a.removeClass("loadingData")})}}function y(a){var c=null,b=window.location.search;b&&(b=b.substring(1).split("\x26"),g.forEach(b,function(b){if(b.startsWith("tagpath")){var f=b.indexOf("\x3d")+1;b=b.substring(f);b=".filter-cat[data-categorytagpath\x3d'"+decodeURIComponent(b)+"']";c=a.find(b)}}));if(c&&c.length)a.find(".filter-all").removeAttr("disabled"),a.find(".filter-all:checked").removeAttr("checked"),
a.find(".filter-cat:checked").removeAttr("checked"),c.attr("checked","checked");else if(b=window.localStorage.getItem("selectedStoriesCategories"))b=JSON.parse(b),a.find(".filter-all").removeAttr("disabled"),a.find(".filter-all:checked").removeAttr("checked"),a.find(".filter-cat:checked").removeAttr("checked"),g.forEach(b,function(b){a.find(".filter-"+b).attr("checked","checked")})}function z(a){a=b(a.currentTarget);a.attr("checked","checked");a.attr("disabled","disabled");a=a.closest(".story-listing-filter-wrapper");
a.find(".filter-cat:checked").removeAttr("checked");h(a,0);a.find(".load-more").removeClass("visible");a.find(".story-listing-filter-content").empty();a.data("halt",!1);n(a)}function A(a){a=b(a.currentTarget).closest(".story-listing-filter-wrapper");if(0===a.find(".filter-cat:checked").length)a.find(".filter-all").trigger("click");else{var c=a.find(".filter-all");c.removeAttr("checked");c.removeAttr("disabled");h(a,0);a.find("article").removeClass("visible");a.find(".load-more").removeClass("visible");
a.find(".story-listing-filter-content").empty();a.data("halt",!1);n(a)}}function B(){var a=b(".story-listing-filter-wrapper");h(a,0);a.find(".load-more").removeClass("visible");a.find(".story-listing-filter-content").empty();a.data("halt",!1);n(a)}var w=x.searchParams(document.URL).get("tagId");null!==w&&(window.localStorage.removeItem("selectedStoriesCategories"),window.localStorage.setItem("selectedStoriesCategories",JSON.stringify([w])));g.forEach(b(".story-listing-filter-wrapper"),function(a){var c=
b(a);c.find("form").on("submit",function(a){a.preventDefault()});c.find(".filter-all").on("click",z);c.find(".filter-cat").on("click",A);var d=c.find("input.article-search-field");if(d){var e=function(){var a=0;return function(b,c){window.clearTimeout(a);a=window.setTimeout(b,c)}}();d.on("keyup",function(){(!d.val()||3<d.val().length)&&e(B,1E3)})}y(c);n(c);c.find(".load-more").on("click",function(a){a.preventDefault();n(c)});b(window).on("resize scroll",function(){var a=c.find(".load-more");if(0!==
a.length){var d=b(window),e=d.height();d=d.scrollTop();e=d+e;var g=a.height();a=a.offset().top;a+g+200>=d&&a<=e&&(3<=l?b(".load-more").css("opacity",1):b(".load-more").css("opacity",0),!c.hasClass("loadingData")&&"auto"===c.data("loadmode")&&3>l&&(l+=1,n(c)))}})})});jQuery(function(b){0===b(".search-and-subscribe-wrapper").length&&styleCheckboxes("input[type\x3d'checkbox']:not(#mce-DISCLAIMER, #consent)")});k(window).on("load",function(){k(".story-listing-filter-options").find(":checkbox").on("change",
function(){listenCheckboxes(".story-listing-filter-options")})});k(document).on("ajaxComplete",function(){listenCheckboxes(".story-listing-filter-options");t()})})(jQuery);